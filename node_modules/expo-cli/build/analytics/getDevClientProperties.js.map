{"version":3,"file":"getDevClientProperties.js","names":["getAccountName","memoize","exp","getAccountUsername","getDevClientVersion","projectRoot","devClientPackage","resolveFrom","silent","JsonFile","read","version","undefined","getProjectType","getDefaultTarget","getDevClientProperties","account_name","owner","dev_client_version","project_type","uptime_ms","process","uptime"],"sources":["../../src/analytics/getDevClientProperties.ts"],"sourcesContent":["import { ExpoConfig, getAccountUsername, getDefaultTarget } from '@expo/config';\nimport JsonFile, { JSONValue } from '@expo/json-file';\nimport memoize from 'lodash/memoize';\nimport resolveFrom from 'resolve-from';\n\nconst getAccountName = memoize((exp: Pick<ExpoConfig, 'owner'>) => {\n  return getAccountUsername(exp);\n});\n\nconst getDevClientVersion = memoize((projectRoot: string): JSONValue | undefined => {\n  try {\n    const devClientPackage = resolveFrom.silent(projectRoot, 'expo-dev-client/package.json');\n    if (devClientPackage) {\n      return JsonFile.read(devClientPackage).version;\n    }\n  } catch {}\n  return undefined;\n});\n\nconst getProjectType = memoize((projectRoot: string): 'managed' | 'generic' => {\n  return getDefaultTarget(projectRoot) === 'managed' ? 'managed' : 'generic';\n});\n\nexport default function getDevClientProperties(projectRoot: string, exp: ExpoConfig) {\n  return {\n    account_name: getAccountName({ owner: exp.owner }),\n    dev_client_version: getDevClientVersion(projectRoot),\n    project_type: getProjectType(projectRoot),\n    uptime_ms: process.uptime() * 1000,\n  };\n}\n"],"mappings":";;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAAuC;AAEvC,MAAMA,cAAc,GAAG,IAAAC,kBAAO,EAAEC,GAA8B,IAAK;EACjE,OAAO,IAAAC,4BAAkB,EAACD,GAAG,CAAC;AAChC,CAAC,CAAC;AAEF,MAAME,mBAAmB,GAAG,IAAAH,kBAAO,EAAEI,WAAmB,IAA4B;EAClF,IAAI;IACF,MAAMC,gBAAgB,GAAGC,sBAAW,CAACC,MAAM,CAACH,WAAW,EAAE,8BAA8B,CAAC;IACxF,IAAIC,gBAAgB,EAAE;MACpB,OAAOG,mBAAQ,CAACC,IAAI,CAACJ,gBAAgB,CAAC,CAACK,OAAO;IAChD;EACF,CAAC,CAAC,MAAM,CAAC;EACT,OAAOC,SAAS;AAClB,CAAC,CAAC;AAEF,MAAMC,cAAc,GAAG,IAAAZ,kBAAO,EAAEI,WAAmB,IAA4B;EAC7E,OAAO,IAAAS,0BAAgB,EAACT,WAAW,CAAC,KAAK,SAAS,GAAG,SAAS,GAAG,SAAS;AAC5E,CAAC,CAAC;AAEa,SAASU,sBAAsB,CAACV,WAAmB,EAAEH,GAAe,EAAE;EACnF,OAAO;IACLc,YAAY,EAAEhB,cAAc,CAAC;MAAEiB,KAAK,EAAEf,GAAG,CAACe;IAAM,CAAC,CAAC;IAClDC,kBAAkB,EAAEd,mBAAmB,CAACC,WAAW,CAAC;IACpDc,YAAY,EAAEN,cAAc,CAACR,WAAW,CAAC;IACzCe,SAAS,EAAEC,OAAO,CAACC,MAAM,EAAE,GAAG;EAChC,CAAC;AACH"}