{"version":3,"file":"platformOptions.js","names":["platformsFromPlatform","platform","loose","process","Log","warn","CommandError","ensureValidPlatforms","platforms","isWindows","includes","chalk","bold","newLine","filter","assertPlatforms","length"],"sources":["../../../src/commands/eject/platformOptions.ts"],"sourcesContent":["import { ModPlatform } from '@expo/config-plugins';\nimport chalk from 'chalk';\n\nimport CommandError from '../../CommandError';\nimport Log from '../../log';\n\nexport function platformsFromPlatform(\n  platform: string = 'all',\n  { loose }: { loose?: boolean } = {}\n): ModPlatform[] {\n  switch (platform) {\n    case 'ios':\n      if (process.platform === 'win32' && !loose) {\n        Log.warn('Ejecting is unsupported locally on windows, use eas build instead');\n        // continue anyways :shrug:\n      }\n      return ['ios'];\n    case 'android':\n      return ['android'];\n    case 'all':\n      if (loose || process.platform !== 'win32') {\n        return ['android', 'ios'];\n      }\n      return ['android'];\n    default:\n      throw new CommandError(`Unsupported platform \"${platform}\". Options are: ios, android, all`);\n  }\n}\n\nexport function ensureValidPlatforms(platforms: ModPlatform[]): ModPlatform[] {\n  const isWindows = process.platform === 'win32';\n  // Skip ejecting for iOS on Windows\n  if (isWindows && platforms.includes('ios')) {\n    Log.warn(\n      `⚠️  Skipping generating the iOS native project files. Run ${chalk.bold(\n        'expo eject'\n      )} again from macOS or Linux to generate the iOS project.`\n    );\n    Log.newLine();\n    return platforms.filter(platform => platform !== 'ios');\n  }\n  return platforms;\n}\n\nexport function assertPlatforms(platforms: ModPlatform[]) {\n  if (!platforms?.length) {\n    throw new CommandError('At least one platform must be enabled when syncing');\n  }\n}\n"],"mappings":";;;;;;;;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA4B;AAErB,SAASA,qBAAqB,CACnCC,QAAgB,GAAG,KAAK,EACxB;EAAEC;AAA2B,CAAC,GAAG,CAAC,CAAC,EACpB;EACf,QAAQD,QAAQ;IACd,KAAK,KAAK;MACR,IAAIE,OAAO,CAACF,QAAQ,KAAK,OAAO,IAAI,CAACC,KAAK,EAAE;QAC1CE,cAAG,CAACC,IAAI,CAAC,mEAAmE,CAAC;QAC7E;MACF;;MACA,OAAO,CAAC,KAAK,CAAC;IAChB,KAAK,SAAS;MACZ,OAAO,CAAC,SAAS,CAAC;IACpB,KAAK,KAAK;MACR,IAAIH,KAAK,IAAIC,OAAO,CAACF,QAAQ,KAAK,OAAO,EAAE;QACzC,OAAO,CAAC,SAAS,EAAE,KAAK,CAAC;MAC3B;MACA,OAAO,CAAC,SAAS,CAAC;IACpB;MACE,MAAM,KAAIK,uBAAY,EAAE,yBAAwBL,QAAS,mCAAkC,CAAC;EAAC;AAEnG;AAEO,SAASM,oBAAoB,CAACC,SAAwB,EAAiB;EAC5E,MAAMC,SAAS,GAAGN,OAAO,CAACF,QAAQ,KAAK,OAAO;EAC9C;EACA,IAAIQ,SAAS,IAAID,SAAS,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAE;IAC1CN,cAAG,CAACC,IAAI,CACL,6DAA4DM,gBAAK,CAACC,IAAI,CACrE,YAAY,CACZ,yDAAwD,CAC3D;IACDR,cAAG,CAACS,OAAO,EAAE;IACb,OAAOL,SAAS,CAACM,MAAM,CAACb,QAAQ,IAAIA,QAAQ,KAAK,KAAK,CAAC;EACzD;EACA,OAAOO,SAAS;AAClB;AAEO,SAASO,eAAe,CAACP,SAAwB,EAAE;EACxD,IAAI,EAACA,SAAS,aAATA,SAAS,eAATA,SAAS,CAAEQ,MAAM,GAAE;IACtB,MAAM,KAAIV,uBAAY,EAAC,oDAAoD,CAAC;EAC9E;AACF"}