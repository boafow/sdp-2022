{"version":3,"file":"prebuildAsync.js","names":["actionAsync","projectRoot","platform","clean","skipDependencyUpdate","options","warnAboutLocalCLI","localCmd","npm","packageManager","platforms","platformsFromPlatform","maybeBailOnGitStatusAsync","clearNativeFolder","promptToClearMalformedNativeProjectsAsync","prebuildAsync","split"],"sources":["../../../src/commands/eject/prebuildAsync.ts"],"sourcesContent":["import { warnAboutLocalCLI } from '../../utils/migration';\nimport maybeBailOnGitStatusAsync from '../utils/maybeBailOnGitStatusAsync';\nimport { clearNativeFolder, promptToClearMalformedNativeProjectsAsync } from './clearNativeFolder';\nimport { platformsFromPlatform } from './platformOptions';\nimport { EjectAsyncOptions, prebuildAsync } from './prebuildAppAsync';\n\nexport async function actionAsync(\n  projectRoot: string,\n  {\n    platform,\n    clean,\n    skipDependencyUpdate,\n    ...options\n  }: EjectAsyncOptions & {\n    npm?: boolean;\n    platform?: string;\n    clean?: boolean;\n    skipDependencyUpdate?: string;\n  }\n) {\n  warnAboutLocalCLI(projectRoot, { localCmd: 'prebuild' });\n\n  if (options.npm) {\n    options.packageManager = 'npm';\n  }\n\n  const platforms = platformsFromPlatform(platform);\n\n  if (clean) {\n    if (await maybeBailOnGitStatusAsync()) return;\n    // Clear the native folders before syncing\n    await clearNativeFolder(projectRoot, platforms);\n  } else {\n    await promptToClearMalformedNativeProjectsAsync(projectRoot, platforms);\n  }\n\n  await prebuildAsync(projectRoot, {\n    ...options,\n    skipDependencyUpdate: skipDependencyUpdate ? skipDependencyUpdate.split(',') : [],\n    platforms,\n  } as EjectAsyncOptions);\n}\n"],"mappings":";;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAAsE;AAE/D,eAAeA,WAAW,CAC/BC,WAAmB,EACnB;EACEC,QAAQ;EACRC,KAAK;EACLC,oBAAoB;EACpB,GAAGC;AAML,CAAC,EACD;EACA,IAAAC,8BAAiB,EAACL,WAAW,EAAE;IAAEM,QAAQ,EAAE;EAAW,CAAC,CAAC;EAExD,IAAIF,OAAO,CAACG,GAAG,EAAE;IACfH,OAAO,CAACI,cAAc,GAAG,KAAK;EAChC;EAEA,MAAMC,SAAS,GAAG,IAAAC,wCAAqB,EAACT,QAAQ,CAAC;EAEjD,IAAIC,KAAK,EAAE;IACT,IAAI,MAAM,IAAAS,oCAAyB,GAAE,EAAE;IACvC;IACA,MAAM,IAAAC,sCAAiB,EAACZ,WAAW,EAAES,SAAS,CAAC;EACjD,CAAC,MAAM;IACL,MAAM,IAAAI,8DAAyC,EAACb,WAAW,EAAES,SAAS,CAAC;EACzE;EAEA,MAAM,IAAAK,iCAAa,EAACd,WAAW,EAAE;IAC/B,GAAGI,OAAO;IACVD,oBAAoB,EAAEA,oBAAoB,GAAGA,oBAAoB,CAACY,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE;IACjFN;EACF,CAAC,CAAsB;AACzB"}