{"version":3,"file":"utils.js","names":["assertSlug","slug","assert","chalk","bold","maybeRenameExistingFileAsync","projectRoot","filename","desiredFilePath","path","resolve","fs","pathExists","num","Log","log","rename"],"sources":["../../../src/commands/fetch/utils.ts"],"sourcesContent":["import assert from 'assert';\nimport chalk from 'chalk';\nimport * as fs from 'fs-extra';\nimport * as path from 'path';\n\nimport Log from '../../log';\n\nexport type Options = {\n  parent?: {\n    nonInteractive: boolean;\n  };\n};\n\nexport function assertSlug(slug: any): asserts slug {\n  assert(slug, `${chalk.bold(slug)} field must be set in your app.json or app.config.js`);\n}\n\nexport async function maybeRenameExistingFileAsync(projectRoot: string, filename: string) {\n  const desiredFilePath = path.resolve(projectRoot, filename);\n\n  if (await fs.pathExists(desiredFilePath)) {\n    let num = 1;\n    while (await fs.pathExists(path.resolve(projectRoot, `OLD_${num}_${filename}`))) {\n      num++;\n    }\n    Log.log(\n      `\\nA file already exists at \"${desiredFilePath}\"\\n  Renaming the existing file to OLD_${num}_${filename}\\n`\n    );\n    await fs.rename(desiredFilePath, path.resolve(projectRoot, `OLD_${num}_${filename}`));\n  }\n}\n"],"mappings":";;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA4B;AAAA;AAAA;AAQrB,SAASA,UAAU,CAACC,IAAS,EAAgB;EAClD,IAAAC,iBAAM,EAACD,IAAI,EAAG,GAAEE,gBAAK,CAACC,IAAI,CAACH,IAAI,CAAE,sDAAqD,CAAC;AACzF;AAEO,eAAeI,4BAA4B,CAACC,WAAmB,EAAEC,QAAgB,EAAE;EACxF,MAAMC,eAAe,GAAGC,IAAI,GAACC,OAAO,CAACJ,WAAW,EAAEC,QAAQ,CAAC;EAE3D,IAAI,MAAMI,EAAE,GAACC,UAAU,CAACJ,eAAe,CAAC,EAAE;IACxC,IAAIK,GAAG,GAAG,CAAC;IACX,OAAO,MAAMF,EAAE,GAACC,UAAU,CAACH,IAAI,GAACC,OAAO,CAACJ,WAAW,EAAG,OAAMO,GAAI,IAAGN,QAAS,EAAC,CAAC,CAAC,EAAE;MAC/EM,GAAG,EAAE;IACP;IACAC,cAAG,CAACC,GAAG,CACJ,+BAA8BP,eAAgB,0CAAyCK,GAAI,IAAGN,QAAS,IAAG,CAC5G;IACD,MAAMI,EAAE,GAACK,MAAM,CAACR,eAAe,EAAEC,IAAI,GAACC,OAAO,CAACJ,WAAW,EAAG,OAAMO,GAAI,IAAGN,QAAS,EAAC,CAAC,CAAC;EACvF;AACF"}