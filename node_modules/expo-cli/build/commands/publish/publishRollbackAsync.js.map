{"version":3,"file":"publishRollbackAsync.js","names":["actionAsync","projectRoot","options","assert","channelId","releaseChannel","sdkVersion","usage","getUsageAsync","CommandError","platform","rollbackPublicationFromChannelAsync"],"sources":["../../../src/commands/publish/publishRollbackAsync.ts"],"sourcesContent":["import assert from 'assert';\n\nimport CommandError from '../../CommandError';\nimport { RollbackOptions, rollbackPublicationFromChannelAsync } from '../utils/PublishUtils';\nimport { getUsageAsync } from './getUsageAsync';\n\ntype Options = {\n  releaseChannel?: string;\n  sdkVersion?: string;\n  platform?: string;\n  channelId?: string;\n};\n\nexport async function actionAsync(projectRoot: string, options: Options) {\n  assert(\n    !options.channelId,\n    '--channel-id flag is deprecated and does not do anything. Please use --release-channel and --sdk-version instead.'\n  );\n\n  if (!options.releaseChannel || !options.sdkVersion) {\n    const usage = await getUsageAsync(projectRoot);\n    throw new CommandError(usage);\n  }\n  if (options.platform) {\n    if (options.platform !== 'android' && options.platform !== 'ios') {\n      throw new CommandError(\n        'Platform must be either android or ios. Leave out the platform flag to target both platforms.'\n      );\n    }\n  }\n  await rollbackPublicationFromChannelAsync(projectRoot, options as RollbackOptions);\n}\n"],"mappings":";;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAAgD;AASzC,eAAeA,WAAW,CAACC,WAAmB,EAAEC,OAAgB,EAAE;EACvE,IAAAC,iBAAM,EACJ,CAACD,OAAO,CAACE,SAAS,EAClB,mHAAmH,CACpH;EAED,IAAI,CAACF,OAAO,CAACG,cAAc,IAAI,CAACH,OAAO,CAACI,UAAU,EAAE;IAClD,MAAMC,KAAK,GAAG,MAAM,IAAAC,8BAAa,EAACP,WAAW,CAAC;IAC9C,MAAM,KAAIQ,uBAAY,EAACF,KAAK,CAAC;EAC/B;EACA,IAAIL,OAAO,CAACQ,QAAQ,EAAE;IACpB,IAAIR,OAAO,CAACQ,QAAQ,KAAK,SAAS,IAAIR,OAAO,CAACQ,QAAQ,KAAK,KAAK,EAAE;MAChE,MAAM,KAAID,uBAAY,EACpB,+FAA+F,CAChG;IACH;EACF;EACA,MAAM,IAAAE,mDAAmC,EAACV,WAAW,EAAEC,OAAO,CAAoB;AACpF"}