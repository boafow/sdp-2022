{"version":3,"file":"upload.js","names":["logMigration","platform","Log","newLine","log","chalk","bold","dim","TerminalLink","learnMore","cyan","linkedText","program","migrateToEasJsonProperty","named","migrateToEasCliArg","cmd","applyAsyncActionProjectDir","command","alias","description","yellow","helpGroup","option","actionAsync"],"sources":["../../src/commands/upload.ts"],"sourcesContent":["import chalk from 'chalk';\nimport type { Command } from 'commander';\n\nimport Log from '../log';\nimport * as TerminalLink from './utils/TerminalLink';\nimport { applyAsyncActionProjectDir } from './utils/applyAsyncAction';\n\nfunction logMigration(platform: string) {\n  Log.newLine();\n  Log.log(\n    `${chalk.bold(\n      `expo upload:${platform}`\n    )} has been superseded by ${chalk.bold`eas submit`}. ${chalk.dim(\n      TerminalLink.learnMore(`https://expo.fyi/expo-upload-${platform}`)\n    )}`\n  );\n  Log.newLine();\n  Log.log('Run the following:');\n  Log.newLine();\n  Log.log('\\u203A ' + chalk.cyan.bold('npm install -g eas-cli'));\n  Log.log(\n    `\\u203A ${TerminalLink.linkedText(\n      chalk.cyan.bold(`eas submit -p ${platform}`),\n      `https://docs.expo.dev/submit/${platform}`\n    )}`\n  );\n  Log.newLine();\n}\n\n// TODO: Drop this entire command category in mid to late 2022\nexport default function (program: Command) {\n  const migrateToEasJsonProperty = (named: string) =>\n    `Migrate to ${chalk.bold`eas.json`}'s ${chalk.bold(named)} property`;\n  const migrateToEasCliArg = (cmd: string) => `Migrate to ${chalk.bold(`eas submit ${cmd}`)}`;\n\n  applyAsyncActionProjectDir(\n    program\n      .command('upload:android [path]')\n      .alias('ua')\n      .description(`${chalk.yellow`Superseded`} by ${chalk.bold`eas submit`} in eas-cli`)\n      .helpGroup('deprecated')\n      .option('--verbose', migrateToEasCliArg('--verbose'))\n      .option('--latest', migrateToEasCliArg('--latest'))\n      .option('--id <id>', migrateToEasCliArg('--id <id>'))\n      .option('--path [path]', migrateToEasCliArg('--path <path>'))\n      .option('--url <url>', migrateToEasCliArg('--url <url>'))\n      .option(\n        '--android-package <android-package>',\n        `Migrate to ${chalk.bold`eas submit`} (android-package is auto inferred)`\n      )\n      .option(\n        '--type <archive-type>',\n        `Migrate to ${chalk.bold`eas submit`} (type is auto inferred)`\n      )\n      .option('--key <key>', migrateToEasJsonProperty('serviceAccountKeyPath'))\n      .option('--track <track>', migrateToEasJsonProperty('track'))\n      .option('--release-status <release-status>', migrateToEasJsonProperty('releaseStatus')),\n    async () => ({\n      async actionAsync() {\n        logMigration('android');\n      },\n    })\n  );\n\n  applyAsyncActionProjectDir(\n    program\n      .command('upload:ios [path]')\n      .alias('ui')\n      .description(`${chalk.yellow`Superseded`} by ${chalk.bold`eas submit`} in eas-cli`)\n      .helpGroup('deprecated')\n      .option('--verbose', migrateToEasCliArg('--verbose'))\n      .option('--latest', migrateToEasCliArg('--latest'))\n      .option('--id <id>', migrateToEasCliArg('--id <id>'))\n      .option('--path [path]', migrateToEasCliArg('--path <path>'))\n      .option('--url <url>', migrateToEasCliArg('--url <url>'))\n      .option('--apple-id <apple-id>', migrateToEasJsonProperty('appleId'))\n      .option('--itc-team-id <itc-team-id>', migrateToEasJsonProperty('appleTeamId'))\n      .option('--app-name <app-name>', migrateToEasJsonProperty('appName'))\n      .option('--company-name <company-name>', migrateToEasJsonProperty('companyName'))\n      .option('--sku <sku>', migrateToEasJsonProperty('sku'))\n      .option('--language <language>', migrateToEasJsonProperty('language')),\n    async () => ({\n      async actionAsync() {\n        logMigration('ios');\n      },\n    })\n  );\n}\n"],"mappings":"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"}