{"version":3,"file":"applyAsyncAction.js","names":["applyAsyncActionProjectDir","command","resolve","settings","asyncActionProjectDir","projectRoot","options","mod","profileMethod","actionAsync","applyAsyncAction","asyncAction","args","applyAnyAsyncAction","assert"],"sources":["../../../src/commands/utils/applyAsyncAction.ts"],"sourcesContent":["import assert from 'assert';\nimport type { Command } from 'commander';\n\nimport { profileMethod } from '../utils/profileMethod';\n\nexport function applyAsyncActionProjectDir<Options = Record<string, any>>(\n  command: Command,\n  resolve: () => Promise<{\n    actionAsync: (projectRoot: string, options: Options) => Promise<unknown>;\n  }>,\n  settings?: { checkConfig?: boolean; skipSDKVersionRequirement?: true }\n) {\n  command.asyncActionProjectDir(async (projectRoot: string, options: Options) => {\n    const mod = await resolve();\n    return profileMethod(mod.actionAsync)(projectRoot, options);\n  }, settings);\n}\n\nexport function applyAsyncAction<Args = string[], Options = Record<string, any>>(\n  command: Command,\n  resolve: () => Promise<{ actionAsync: (args: Args, options: Options) => Promise<unknown> }>\n) {\n  command.asyncAction(async (args: Args, options: Options) => {\n    const mod = await resolve();\n    return profileMethod(mod.actionAsync)(args, options);\n  });\n}\n\nexport function applyAnyAsyncAction<Options = Record<string, any>>(\n  command: Command,\n  resolve: () => Promise<{ actionAsync: (options: Options) => Promise<unknown> }>\n) {\n  command.asyncAction(async (options: Options) => {\n    assert(typeof options !== 'string', 'Unexpected string passed to command');\n    const mod = await resolve();\n    return profileMethod(mod.actionAsync)(options);\n  });\n}\n"],"mappings":";;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAAuD;AAEhD,SAASA,0BAA0B,CACxCC,OAAgB,EAChBC,OAEE,EACFC,QAAsE,EACtE;EACAF,OAAO,CAACG,qBAAqB,CAAC,OAAOC,WAAmB,EAAEC,OAAgB,KAAK;IAC7E,MAAMC,GAAG,GAAG,MAAML,OAAO,EAAE;IAC3B,OAAO,IAAAM,8BAAa,EAACD,GAAG,CAACE,WAAW,CAAC,CAACJ,WAAW,EAAEC,OAAO,CAAC;EAC7D,CAAC,EAAEH,QAAQ,CAAC;AACd;AAEO,SAASO,gBAAgB,CAC9BT,OAAgB,EAChBC,OAA2F,EAC3F;EACAD,OAAO,CAACU,WAAW,CAAC,OAAOC,IAAU,EAAEN,OAAgB,KAAK;IAC1D,MAAMC,GAAG,GAAG,MAAML,OAAO,EAAE;IAC3B,OAAO,IAAAM,8BAAa,EAACD,GAAG,CAACE,WAAW,CAAC,CAACG,IAAI,EAAEN,OAAO,CAAC;EACtD,CAAC,CAAC;AACJ;AAEO,SAASO,mBAAmB,CACjCZ,OAAgB,EAChBC,OAA+E,EAC/E;EACAD,OAAO,CAACU,WAAW,CAAC,MAAOL,OAAgB,IAAK;IAC9C,IAAAQ,iBAAM,EAAC,OAAOR,OAAO,KAAK,QAAQ,EAAE,qCAAqC,CAAC;IAC1E,MAAMC,GAAG,GAAG,MAAML,OAAO,EAAE;IAC3B,OAAO,IAAAM,8BAAa,EAACD,GAAG,CAACE,WAAW,CAAC,CAACH,OAAO,CAAC;EAChD,CAAC,CAAC;AACJ"}