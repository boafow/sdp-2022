{"version":3,"file":"maybeBailOnGitStatusAsync.js","names":["EXPO_NO_GIT_STATUS","boolish","maybeBailOnGitStatusAsync","Log","warn","isGitStatusClean","validateGitStatusAsync","program","nonInteractive","addNewLineIfNone","answer","confirmAsync","message","newLine"],"sources":["../../../src/commands/utils/maybeBailOnGitStatusAsync.ts"],"sourcesContent":["import program from 'commander';\nimport { boolish } from 'getenv';\n\nimport Log from '../../log';\nimport { confirmAsync } from '../../utils/prompts';\nimport { validateGitStatusAsync } from './ProjectUtils';\n\nconst EXPO_NO_GIT_STATUS = boolish('EXPO_NO_GIT_STATUS', false);\n\nexport default async function maybeBailOnGitStatusAsync(): Promise<boolean> {\n  if (EXPO_NO_GIT_STATUS) {\n    Log.warn(\n      'Git status is dirty but the command will continue because EXPO_NO_GIT_STATUS is enabled...'\n    );\n    return false;\n  }\n  const isGitStatusClean = await validateGitStatusAsync();\n\n  // Give people a chance to bail out if git working tree is dirty\n  if (!isGitStatusClean) {\n    if (program.nonInteractive) {\n      Log.warn(\n        `Git status is dirty but the command will continue because nonInteractive is enabled.`\n      );\n      return false;\n    }\n\n    Log.addNewLineIfNone();\n    const answer = await confirmAsync({\n      message: `Would you like to proceed?`,\n    });\n\n    if (!answer) {\n      return true;\n    }\n\n    Log.newLine();\n  }\n  return false;\n}\n"],"mappings":";;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAAwD;AAExD,MAAMA,kBAAkB,GAAG,IAAAC,iBAAO,EAAC,oBAAoB,EAAE,KAAK,CAAC;AAEhD,eAAeC,yBAAyB,GAAqB;EAC1E,IAAIF,kBAAkB,EAAE;IACtBG,cAAG,CAACC,IAAI,CACN,4FAA4F,CAC7F;IACD,OAAO,KAAK;EACd;EACA,MAAMC,gBAAgB,GAAG,MAAM,IAAAC,sCAAsB,GAAE;;EAEvD;EACA,IAAI,CAACD,gBAAgB,EAAE;IACrB,IAAIE,oBAAO,CAACC,cAAc,EAAE;MAC1BL,cAAG,CAACC,IAAI,CACL,sFAAqF,CACvF;MACD,OAAO,KAAK;IACd;IAEAD,cAAG,CAACM,gBAAgB,EAAE;IACtB,MAAMC,MAAM,GAAG,MAAM,IAAAC,uBAAY,EAAC;MAChCC,OAAO,EAAG;IACZ,CAAC,CAAC;IAEF,IAAI,CAACF,MAAM,EAAE;MACX,OAAO,IAAI;IACb;IAEAP,cAAG,CAACU,OAAO,EAAE;EACf;EACA,OAAO,KAAK;AACd"}