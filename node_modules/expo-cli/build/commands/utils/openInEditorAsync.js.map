{"version":3,"file":"openInEditorAsync.js","names":["guessEditor","editors","defaultEditor","getEditor","openInEditorAsync","path","options","editor","Log","debug","name","binary","id","spawnAsync","error"],"sources":["../../../src/commands/utils/openInEditorAsync.ts"],"sourcesContent":["import spawnAsync from '@expo/spawn-async';\nimport editors from 'env-editor';\n\nimport Log from '../../log';\n\nexport function guessEditor() {\n  try {\n    return editors.defaultEditor();\n  } catch {\n    return editors.getEditor('vscode');\n  }\n}\n\nexport async function openInEditorAsync(\n  path: string,\n  options: { editor?: string } = {}\n): Promise<boolean> {\n  const editor = options.editor ? editors.getEditor(options.editor) : guessEditor();\n\n  Log.debug(`Opening ${path} in ${editor.name} (bin: ${editor.binary}, id: ${editor.id})`);\n  if (editor) {\n    try {\n      await spawnAsync(editor.binary, [path]);\n      return true;\n    } catch {}\n  }\n\n  if (options.editor) {\n    Log.error(\n      `Could not resolve editor from environment variable $EXPO_EDITOR=\"${options.editor}\". Trying again with system default.`\n    );\n    return openInEditorAsync(path, {});\n  }\n\n  Log.error(\n    'Could not open editor, you can set it by defining the $EDITOR environment variable with the binary of your editor. (e.g. \"code\" or \"atom\")'\n  );\n  return false;\n}\n"],"mappings":";;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA4B;AAErB,SAASA,WAAW,GAAG;EAC5B,IAAI;IACF,OAAOC,oBAAO,CAACC,aAAa,EAAE;EAChC,CAAC,CAAC,MAAM;IACN,OAAOD,oBAAO,CAACE,SAAS,CAAC,QAAQ,CAAC;EACpC;AACF;AAEO,eAAeC,iBAAiB,CACrCC,IAAY,EACZC,OAA4B,GAAG,CAAC,CAAC,EACf;EAClB,MAAMC,MAAM,GAAGD,OAAO,CAACC,MAAM,GAAGN,oBAAO,CAACE,SAAS,CAACG,OAAO,CAACC,MAAM,CAAC,GAAGP,WAAW,EAAE;EAEjFQ,cAAG,CAACC,KAAK,CAAE,WAAUJ,IAAK,OAAME,MAAM,CAACG,IAAK,UAASH,MAAM,CAACI,MAAO,SAAQJ,MAAM,CAACK,EAAG,GAAE,CAAC;EACxF,IAAIL,MAAM,EAAE;IACV,IAAI;MACF,MAAM,IAAAM,qBAAU,EAACN,MAAM,CAACI,MAAM,EAAE,CAACN,IAAI,CAAC,CAAC;MACvC,OAAO,IAAI;IACb,CAAC,CAAC,MAAM,CAAC;EACX;EAEA,IAAIC,OAAO,CAACC,MAAM,EAAE;IAClBC,cAAG,CAACM,KAAK,CACN,oEAAmER,OAAO,CAACC,MAAO,sCAAqC,CACzH;IACD,OAAOH,iBAAiB,CAACC,IAAI,EAAE,CAAC,CAAC,CAAC;EACpC;EAEAG,cAAG,CAACM,KAAK,CACP,4IAA4I,CAC7I;EACD,OAAO,KAAK;AACd"}