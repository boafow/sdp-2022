{"version":3,"file":"progress.js","names":["createProgressTracker","_total","bar","transferredSoFar","progress","total","undefined","ProgressBar","complete","incomplete","width","Log","setBundleProgressBar","tick","transferred"],"sources":["../../../src/commands/utils/progress.ts"],"sourcesContent":["import type { Progress } from 'got';\nimport ProgressBar from 'progress';\n\nimport Log from '../../log';\n\ntype ProgressTracker = (progress: Progress) => void;\n\nfunction createProgressTracker(_total?: number): ProgressTracker {\n  let bar: ProgressBar | null = null;\n  let transferredSoFar = 0;\n  return (progress: Progress) => {\n    if (!bar && (progress.total !== undefined || _total !== undefined)) {\n      const total = (_total ?? progress.total) as number;\n      bar = new ProgressBar('[:bar] :percent :etas', {\n        complete: '=',\n        incomplete: ' ',\n        total,\n        width: 64,\n      });\n      Log.setBundleProgressBar(bar);\n    }\n    if (bar) {\n      bar.tick(progress.transferred - transferredSoFar);\n    }\n    transferredSoFar = progress.transferred;\n  };\n}\n\nexport { createProgressTracker };\n"],"mappings":";;;;;;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA4B;AAI5B,SAASA,qBAAqB,CAACC,MAAe,EAAmB;EAC/D,IAAIC,GAAuB,GAAG,IAAI;EAClC,IAAIC,gBAAgB,GAAG,CAAC;EACxB,OAAQC,QAAkB,IAAK;IAC7B,IAAI,CAACF,GAAG,KAAKE,QAAQ,CAACC,KAAK,KAAKC,SAAS,IAAIL,MAAM,KAAKK,SAAS,CAAC,EAAE;MAClE,MAAMD,KAAK,GAAIJ,MAAM,aAANA,MAAM,cAANA,MAAM,GAAIG,QAAQ,CAACC,KAAgB;MAClDH,GAAG,GAAG,KAAIK,mBAAW,EAAC,uBAAuB,EAAE;QAC7CC,QAAQ,EAAE,GAAG;QACbC,UAAU,EAAE,GAAG;QACfJ,KAAK;QACLK,KAAK,EAAE;MACT,CAAC,CAAC;MACFC,cAAG,CAACC,oBAAoB,CAACV,GAAG,CAAC;IAC/B;IACA,IAAIA,GAAG,EAAE;MACPA,GAAG,CAACW,IAAI,CAACT,QAAQ,CAACU,WAAW,GAAGX,gBAAgB,CAAC;IACnD;IACAA,gBAAgB,GAAGC,QAAQ,CAACU,WAAW;EACzC,CAAC;AACH"}