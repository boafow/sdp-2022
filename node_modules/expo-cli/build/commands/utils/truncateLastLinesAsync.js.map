{"version":3,"file":"truncateLastLinesAsync.js","names":["truncateLastLinesAsync","filePath","n","lines","size","Promise","all","readLastLines","read","fs","promises","stat","toTruncate","length","truncate"],"sources":["../../../src/commands/utils/truncateLastLinesAsync.ts"],"sourcesContent":["import fs from 'fs';\nimport readLastLines from 'read-last-lines';\n\n// truncate the last n lines in a file\nexport async function truncateLastLinesAsync(filePath: string, n: number) {\n  const [lines, { size }] = await Promise.all([\n    readLastLines.read(filePath, n),\n    fs.promises.stat(filePath),\n  ]);\n  const toTruncate = lines.length;\n  await fs.promises.truncate(filePath, size - toTruncate);\n}\n"],"mappings":";;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA4C;AAE5C;AACO,eAAeA,sBAAsB,CAACC,QAAgB,EAAEC,CAAS,EAAE;EACxE,MAAM,CAACC,KAAK,EAAE;IAAEC;EAAK,CAAC,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAC1CC,wBAAa,CAACC,IAAI,CAACP,QAAQ,EAAEC,CAAC,CAAC,EAC/BO,aAAE,CAACC,QAAQ,CAACC,IAAI,CAACV,QAAQ,CAAC,CAC3B,CAAC;EACF,MAAMW,UAAU,GAAGT,KAAK,CAACU,MAAM;EAC/B,MAAMJ,aAAE,CAACC,QAAQ,CAACI,QAAQ,CAACb,QAAQ,EAAEG,IAAI,GAAGQ,UAAU,CAAC;AACzD"}