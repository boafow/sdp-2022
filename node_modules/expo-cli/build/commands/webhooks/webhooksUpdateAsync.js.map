{"version":3,"file":"webhooksUpdateAsync.js","names":["actionAsync","projectRoot","id","url","event","options","assert","secret","validateSecret","project","client","setupAsync","webhook","getAsync","spinner","ora","start","patchAsync","succeed"],"sources":["../../../src/commands/webhooks/webhooksUpdateAsync.ts"],"sourcesContent":["import assert from 'assert';\n\nimport { ora } from '../../utils/ora';\nimport { setupAsync, validateSecret, WebhookEvent } from './utils';\n\ntype Options = {\n  id?: string;\n  url?: string;\n  event?: WebhookEvent;\n  secret?: string;\n};\n\nexport async function actionAsync(projectRoot: string, { id, url, event, ...options }: Options) {\n  assert(typeof id === 'string', '--id must be a webhook ID');\n  assert(event == null || typeof event === 'string', '--event: string is required');\n  let secret = validateSecret(options);\n\n  const { project, client } = await setupAsync(projectRoot);\n\n  const webhook = await client.getAsync(`projects/${project.id}/webhooks/${id}`);\n  event = event ?? webhook.event;\n  secret = secret ?? webhook.secret;\n\n  const spinner = ora(`Updating webhook ${id}`).start();\n  await client.patchAsync(`projects/${project.id}/webhooks/${id}`, { url, event, secret });\n  spinner.succeed();\n}\n"],"mappings":";;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAAmE;AAS5D,eAAeA,WAAW,CAACC,WAAmB,EAAE;EAAEC,EAAE;EAAEC,GAAG;EAAEC,KAAK;EAAE,GAAGC;AAAiB,CAAC,EAAE;EAAA;EAC9F,IAAAC,iBAAM,EAAC,OAAOJ,EAAE,KAAK,QAAQ,EAAE,2BAA2B,CAAC;EAC3D,IAAAI,iBAAM,EAACF,KAAK,IAAI,IAAI,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE,6BAA6B,CAAC;EACjF,IAAIG,MAAM,GAAG,IAAAC,uBAAc,EAACH,OAAO,CAAC;EAEpC,MAAM;IAAEI,OAAO;IAAEC;EAAO,CAAC,GAAG,MAAM,IAAAC,mBAAU,EAACV,WAAW,CAAC;EAEzD,MAAMW,OAAO,GAAG,MAAMF,MAAM,CAACG,QAAQ,CAAE,YAAWJ,OAAO,CAACP,EAAG,aAAYA,EAAG,EAAC,CAAC;EAC9EE,KAAK,aAAGA,KAAK,2CAAIQ,OAAO,CAACR,KAAK;EAC9BG,MAAM,cAAGA,MAAM,6CAAIK,OAAO,CAACL,MAAM;EAEjC,MAAMO,OAAO,GAAG,IAAAC,UAAG,EAAE,oBAAmBb,EAAG,EAAC,CAAC,CAACc,KAAK,EAAE;EACrD,MAAMN,MAAM,CAACO,UAAU,CAAE,YAAWR,OAAO,CAACP,EAAG,aAAYA,EAAG,EAAC,EAAE;IAAEC,GAAG;IAAEC,KAAK;IAAEG;EAAO,CAAC,CAAC;EACxFO,OAAO,CAACI,OAAO,EAAE;AACnB"}