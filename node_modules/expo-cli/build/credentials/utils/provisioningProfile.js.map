{"version":3,"file":"provisioningProfile.js","names":["readAppleTeam","dataBase64","profilePlist","parse","teamId","teamName","Error","readProfileName","buffer","Buffer","from","profile","toString","plist"],"sources":["../../../src/credentials/utils/provisioningProfile.ts"],"sourcesContent":["import plist, { PlistArray, PlistObject } from '@expo/plist';\n\ninterface AppleTeam {\n  teamId: string;\n  teamName: string;\n}\n\nfunction readAppleTeam(dataBase64: string): AppleTeam {\n  const profilePlist = parse(dataBase64);\n  const teamId = (profilePlist['TeamIdentifier'] as PlistArray)?.[0] as string;\n  const teamName = profilePlist['TeamName'] as string;\n  if (!teamId) {\n    throw new Error('Team identifier is missing from provisoning profile');\n  }\n  return { teamId, teamName };\n}\n\nfunction readProfileName(dataBase64: string): string {\n  const profilePlist = parse(dataBase64);\n  return profilePlist['Name'] as string;\n}\n\nfunction parse(dataBase64: string): PlistObject {\n  try {\n    const buffer = Buffer.from(dataBase64, 'base64');\n    const profile = buffer.toString('utf-8');\n    return plist.parse(profile) as PlistObject;\n  } catch {\n    throw new Error('Provisioning profile is malformed');\n  }\n}\n\nexport { readAppleTeam, readProfileName };\n"],"mappings":";;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA6D;AAO7D,SAASA,aAAa,CAACC,UAAkB,EAAa;EAAA;EACpD,MAAMC,YAAY,GAAGC,KAAK,CAACF,UAAU,CAAC;EACtC,MAAMG,MAAM,4BAAIF,YAAY,CAAC,gBAAgB,CAAC,0DAA/B,sBAAiD,CAAC,CAAW;EAC5E,MAAMG,QAAQ,GAAGH,YAAY,CAAC,UAAU,CAAW;EACnD,IAAI,CAACE,MAAM,EAAE;IACX,MAAM,IAAIE,KAAK,CAAC,qDAAqD,CAAC;EACxE;EACA,OAAO;IAAEF,MAAM;IAAEC;EAAS,CAAC;AAC7B;AAEA,SAASE,eAAe,CAACN,UAAkB,EAAU;EACnD,MAAMC,YAAY,GAAGC,KAAK,CAACF,UAAU,CAAC;EACtC,OAAOC,YAAY,CAAC,MAAM,CAAC;AAC7B;AAEA,SAASC,KAAK,CAACF,UAAkB,EAAe;EAC9C,IAAI;IACF,MAAMO,MAAM,GAAGC,MAAM,CAACC,IAAI,CAACT,UAAU,EAAE,QAAQ,CAAC;IAChD,MAAMU,OAAO,GAAGH,MAAM,CAACI,QAAQ,CAAC,OAAO,CAAC;IACxC,OAAOC,gBAAK,CAACV,KAAK,CAACQ,OAAO,CAAC;EAC7B,CAAC,CAAC,MAAM;IACN,MAAM,IAAIL,KAAK,CAAC,mCAAmC,CAAC;EACtD;AACF"}