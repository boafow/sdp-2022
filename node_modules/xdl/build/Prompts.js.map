{"version":3,"file":"Prompts.js","names":["listeners","addInteractionListener","callback","push","removeInteractionListener","listenerIndex","findIndex","_callback","Error","splice","pauseInteractions","options","listener","pause","resumeInteractions","confirmAsync","value","prompts","type","name"],"sources":["../src/Prompts.ts"],"sourcesContent":["import prompts from 'prompts';\n\ntype InteractionOptions = { pause: boolean; canEscape?: boolean };\n\ntype InteractionCallback = (options: InteractionOptions) => void;\n\nconst listeners: InteractionCallback[] = [];\n\n/**\n * Used to pause/resume interaction observers while prompting (made for TerminalUI).\n *\n * @param callback\n */\nexport function addInteractionListener(callback: InteractionCallback) {\n  listeners.push(callback);\n}\n\nexport function removeInteractionListener(callback: InteractionCallback) {\n  const listenerIndex = listeners.findIndex(_callback => _callback === callback);\n  if (listenerIndex === -1) {\n    throw new Error(\n      'Logger.removeInteractionListener(): cannot remove an unregistered event listener.'\n    );\n  }\n  listeners.splice(listenerIndex, 1);\n}\n\nexport function pauseInteractions(options: Omit<InteractionOptions, 'pause'> = {}) {\n  for (const listener of listeners) {\n    listener({ pause: true, ...options });\n  }\n}\n\nexport function resumeInteractions(options: Omit<InteractionOptions, 'pause'> = {}) {\n  for (const listener of listeners) {\n    listener({ pause: false, ...options });\n  }\n}\n\nexport async function confirmAsync(options: {\n  initial?: boolean;\n  message: string;\n}): Promise<boolean> {\n  pauseInteractions();\n  const { value } = await prompts({\n    type: 'confirm',\n    name: 'value',\n    ...options,\n  });\n  resumeInteractions();\n  return value;\n}\n"],"mappings":";;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA8B;AAM9B,MAAMA,SAAgC,GAAG,EAAE;;AAE3C;AACA;AACA;AACA;AACA;AACO,SAASC,sBAAsB,CAACC,QAA6B,EAAE;EACpEF,SAAS,CAACG,IAAI,CAACD,QAAQ,CAAC;AAC1B;AAEO,SAASE,yBAAyB,CAACF,QAA6B,EAAE;EACvE,MAAMG,aAAa,GAAGL,SAAS,CAACM,SAAS,CAACC,SAAS,IAAIA,SAAS,KAAKL,QAAQ,CAAC;EAC9E,IAAIG,aAAa,KAAK,CAAC,CAAC,EAAE;IACxB,MAAM,IAAIG,KAAK,CACb,mFAAmF,CACpF;EACH;EACAR,SAAS,CAACS,MAAM,CAACJ,aAAa,EAAE,CAAC,CAAC;AACpC;AAEO,SAASK,iBAAiB,CAACC,OAA0C,GAAG,CAAC,CAAC,EAAE;EACjF,KAAK,MAAMC,QAAQ,IAAIZ,SAAS,EAAE;IAChCY,QAAQ,CAAC;MAAEC,KAAK,EAAE,IAAI;MAAE,GAAGF;IAAQ,CAAC,CAAC;EACvC;AACF;AAEO,SAASG,kBAAkB,CAACH,OAA0C,GAAG,CAAC,CAAC,EAAE;EAClF,KAAK,MAAMC,QAAQ,IAAIZ,SAAS,EAAE;IAChCY,QAAQ,CAAC;MAAEC,KAAK,EAAE,KAAK;MAAE,GAAGF;IAAQ,CAAC,CAAC;EACxC;AACF;AAEO,eAAeI,YAAY,CAACJ,OAGlC,EAAoB;EACnBD,iBAAiB,EAAE;EACnB,MAAM;IAAEM;EAAM,CAAC,GAAG,MAAM,IAAAC,kBAAO,EAAC;IAC9BC,IAAI,EAAE,SAAS;IACfC,IAAI,EAAE,OAAO;IACb,GAAGR;EACL,CAAC,CAAC;EACFG,kBAAkB,EAAE;EACpB,OAAOE,KAAK;AACd"}