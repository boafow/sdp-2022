{"version":3,"file":"waitForActionAsync.js","names":["TimeoutError","Error","waitForActionAsync","action","interval","maxWaitTime","complete","start","Date","now","delayAsync"],"sources":["../../../src/apple/utils/waitForActionAsync.ts"],"sourcesContent":["import { delayAsync } from '../../utils/delayAsync';\n\nexport class TimeoutError extends Error {}\n\nexport async function waitForActionAsync<T>({\n  action,\n  interval = 100,\n  maxWaitTime = 20000,\n}: {\n  action: () => T | Promise<T>;\n  interval?: number;\n  maxWaitTime?: number;\n}): Promise<T> {\n  let complete: T;\n  const start = Date.now();\n  do {\n    complete = await action();\n\n    await delayAsync(interval);\n    if (Date.now() - start > maxWaitTime) {\n      break;\n    }\n  } while (!complete);\n\n  return complete;\n}\n"],"mappings":";;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEO,MAAMA,YAAY,SAASC,KAAK,CAAC;AAAE;AAEnC,eAAeC,kBAAkB,CAAI;EAC1CC,MAAM;EACNC,QAAQ,GAAG,GAAG;EACdC,WAAW,GAAG;AAKhB,CAAC,EAAc;EACb,IAAIC,QAAW;EACf,MAAMC,KAAK,GAAGC,IAAI,CAACC,GAAG,EAAE;EACxB,GAAG;IACDH,QAAQ,GAAG,MAAMH,MAAM,EAAE;IAEzB,MAAM,IAAAO,wBAAU,EAACN,QAAQ,CAAC;IAC1B,IAAII,IAAI,CAACC,GAAG,EAAE,GAAGF,KAAK,GAAGF,WAAW,EAAE;MACpC;IACF;EACF,CAAC,QAAQ,CAACC,QAAQ;EAElB,OAAOA,QAAQ;AACjB"}